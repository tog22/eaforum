if(typeof Protoplasm=="undefined"){throw ("protoplasm.js not loaded, could not intitialize ticker")}if(typeof Control=="undefined"){Control={}}Control.Ticker=Class.create({initialize:function(b,a){a=Object.extend({generator:null,interval:10,step:-1,gap:50},a||{});b.style.overflow="hidden";b.style.position="relative";b.on("mouseover",function(c){this.setScrollDelay(a.interval*2)}.bindAsEventListener(this));b.on("mouseout",function(c){this.setScrollDelay(a.interval)}.bindAsEventListener(this));scroller=new Element("div",{style:"position:absolute;white-space:nowrap;"});content=new Element("div");while(b.firstChild){content.appendChild(b.firstChild)}b.appendChild(scroller);this.element=$(b);this.options=a;this.scroller=scroller;this.interval=a.interval;this.offset=0;this.reset=0;this.max=0;this.update(a.generator||function(){return content.childNodes});this.offset=this.element.offsetWidth;this.start()},setScrollDelay:function(a){this.interval=a;if(this.timer){this.stop();this.start()}},start:function(){this.timer=setInterval(function(){this.scroll(this.options.step)}.bind(this),this.interval)},scroll:function(a){this.offset=this.offset+a;if(this.offset<-this.max){this.offset=this.reset}this.scroller.style.left=this.offset+"px"},refresh:function(){if(this.options.generator){this.update(this.options.generator)}},update:function(b){while(this.scroller.firstChild){this.scroller.removeChild(this.scroller.firstChild)}this.scroller.appendChild(this.box(b()));var a=this.scroller.offsetWidth;this.max=a;this.reset=0;this.scroller.appendChild(this.box(b()));if(this.scroller.offsetWidth==a){this.reset=this.element.offsetWidth}else{while(this.scroller.offsetWidth<this.element.offsetWidth+a){this.scroller.appendChild(this.box(b()))}}},box:function(a){var b=new Element("div",{style:"position:relative;display:inline-block;margin-right:"+this.options.gap+"px;"});if(Object.isArray(a)){$A(a).each(function(c){b.appendChild(c)})}else{b.appendChild(a)}return b},stop:function(){if(this.timer){clearInterval(this.timer);this.timer=null}}});Protoplasm.register("ticker",Control.Ticker);